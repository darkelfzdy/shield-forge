# Shield Forge 技术文档

## 1. 项目概述
Shield Forge 是一个密码生成器应用，基于产品需求文档（PRD）设计，提供军工级加密算法、可视化强度评估和跨平台兼容性。项目使用HTML、CSS和JavaScript实现，旨在测试AI编写网页和Code-Server端口转发能力。核心功能包括密码生成、强度评估和复制功能。

## 2. 安装指南
项目依赖于Node.js环境。使用以下步骤安装：
- 确保Node.js已安装（版本14或更高）。
- 导航到项目目录（`project/shield-forge`）。
- 运行`npm install`以安装依赖项（仅依赖`http-server`）。

## 3. 运行指南
- 启动开发服务器：运行`npm run dev`，这将使用`http-server`在端口3000上启动服务器。
- 访问应用：在浏览器中打开`http://localhost:3000`。
- 应用将加载index.html，并使用app.js处理密码生成逻辑。

## 4. 代码结构
项目文件组织简洁，包含以下主要文件：
- **index.html**：定义用户界面，包括密码生成表单、强度指示条和按钮。使用HTML5元素，包含JavaScript和CSS链接。
- **app.js**：核心JavaScript逻辑，实现密码生成、强度计算和事件处理。包括字符集定义、生成算法（基于用户配置）、OWASP合规增强和复制功能。
- **style.css**：提供CSS样式，处理布局、颜色和交互反馈（如强度条的颜色变化）。
- **package.json**：管理项目依赖和脚本，包含`http-server`用于本地开发服务器。
- **README.md**：包含产品需求文档（PRD），不涉及代码细节。

## 5. 功能实现细节
### 5.1 密码生成
- **算法**：使用随机字符选择和打乱，确保密码强度。支持长度控制（8-64字符）、字符类型选择（大写、小写、数字、符号）和排除相似字符选项。
- **OWASP合规**：如果启用保存模式，强制密码长度至少12字符，并确保包含所有字符类型。如果缺少某些类型，函数`enforceOWASPRules`会随机插入缺失字符。
- **代码位置**：在`app.js`中，函数`generatePassword`处理核心逻辑。

### 5.2 密码强度评估
- **计算方法**：基于熵值（Shannon熵），使用函数`calculateEntropy`计算。字符集大小动态根据用户选择计算。
- **可视化**：强度条通过CSS变化显示（红色<60、黄色<80、绿色<100、蓝色>=100）。函数`updateStrengthIndicator`更新UI。
- **代码位置**：在`app.js`中，结合事件监听器。

### 5.3 其他功能
- **复制功能**：使用`document.execCommand('copy')`实现密码复制，并提供视觉反馈（按钮文本变化）。
- **事件处理**：在`app.js`中，监听生成按钮点击，处理用户输入并更新页面。

## 6. 非功能细节
- **性能**：响应时间目标≤300ms（不含加密计算），通过简单JavaScript实现。
- **兼容性**：支持Chrome、Firefox和Safari最新版本。
- **安全性**：遵循CSP3和XSS防护最佳实践，OWASP标准用于密码生成。
- **可访问性**：应符合WCAG 2.1 AA标准（当前实现未显式处理，但UI使用标准HTML元素）。

## 7. 部署说明
- 可以部署到Cloudflare Pages（根据README.md测试）。
- 构建过程：无复杂构建步骤，仅需静态文件服务器。

此文档基于现有代码结构编写，旨在提供清晰的技术指导。如果需要更新，请参考源代码。